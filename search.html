<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>search product</title>
    <!-- normalize.css -->
    <link rel="stylesheet" href="./normalize.css" />
    <!-- main.css -->
    <link rel="stylesheet" href="./main.css" />
<!--     font awesome cdn -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  </head>
  <body>
    <form class="form">
            <a href="index.html"><i class="  fa-solid fa-caret-left  fa-beat-fade">back</i> </a> 

      <h4 style="color: rgb(4, 255, 58) ; font-size:xx-large;">search product</h4>
      
      </div><div class="form-row">
        <label class="form-label">serial number</label>
        <input  class="form-input " />
      </div>
      
     
      </div>
    
      <button    class="btn btn-block btn">search</button>
     <br><br>   
       <!-- <button id="Selbtn">serch</button> --> 
      <label id="openCameraButton"  class="btn btn-block submit "style=text-align:center;>scan QR</label>
    
<!-- ============================================= -->
<!-- <button id="openCameraButton">Open Camera</button> -->




   








      <!-- --------------------------- -->
    </form>
    <video id="cameraPreview" width="640" height="480" style="display:none;"></video>

<!--     
    <label class="form-label">product model</label>
    <input type="text" id="productmodelv" class="form-input " />
  </div>
  <div class="form-row">
    <label class="form-label">product name</label>
    <input id="productnamev" class="form-input " required />
  </div>
  <div class="form-row">
    <label class="form-label">company name</label>
    <input id="companynamev" class="form-input " />
  </div>
  <div class="form-row">
    <label class="form-label">serial number</label>
    <input id="serialnumberv" type="number" class="form-input " required />
  </div>
  <div class="form-row">
    <label class="form-label" required>production date</label>
    <input id="productiondatev" type="date" class="form-input " />
  </div>
  <div class="form-row">
    <label class="form-label" required>expire date</label>
    <input id="expiredatev" type="date" class="form-input " />
  </div> -->

  </body>

  <script type="module">

document.getElementById('openCameraButton').addEventListener('click', function() {
    // Check if the browser supports the getUserMedia API
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(function (stream) {
                // Handle successful camera access
                var video = document.getElementById('cameraPreview');
                video.srcObject = stream;
                video.style.display = 'block';
            })
            .catch(function (error) {
                // Handle errors (e.g., the user denied camera access)
                console.error('Error accessing camera:', error);
            });
    } else {
        alert('getUserMedia is not supported in this browser');
    }
});










     // Import the functions you need from the SDKs you need
     import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "",
      authDomain: "",
      projectId: "",
      storageBucket: "",
      messagingSenderId: "",
      appId: ""
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);

    import {getDatabase,ref,get,set,child,update,remove}
    from "https://www.gstatic.com/firebasejs/10.3.0/firebase-database.js";
    const db = getDatabase();

    
var selbtn = document.getElementById('Selbtn');


  var prod_model = document.getElementById("productmodelv");
  var prod_name = document.getElementById("productnamev");
  var company_name = document.getElementById("companynamev");
  var serial_number = document.getElementById("serialnumberv");
  var prod_date = document.getElementById("productiondatev").innerText;
  var exp_date = document.getElementById("expiredatev").innerText;

     // select 
     function selectdata(){
        const dbref = ref(db);
        get(child(dbref,"products/"+ serial_number.value)).then((snapshot)=>{
            if(snapshot.exists()){

              alert('exist')
       prodmodel.value = snapshot.val().prod_model;
       productname.value = snapshot.val(). prod_name;
       companyname.value = snapshot.val(). company_name;
      //  serialnumber.value = snapshot.val().serial_number;
       productiondate.value = snapshot.val(). prod_date;
       expiredate.value = snapshot.val(). exp_date;

        
        }
            else{
                alert ("No such record found"+ error) ;
            }
        })
            .catch((error)=>{
                alert ('Error'+ error)
            });
        
    }

    Selbtn.addEventListener('click',selectdata);
  </script>
</html>
